name: linux

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

env:
  secret: Release

jobs:
  build:
    runs-on: ubuntu-20.04

    steps:
      - uses: actions/checkout@v3

      - name: Setup
        run: echo 'setup done'

      - name: Build
        run: |
          cd kerbal-dashboard
          npm i
          cd ..
          docker build -t backend:01 . 

      - name: Test Backend
        run: |
          docker run backend:01 /check.sh

      - name: Test
        run: |
          cd kerbal-dashboard
          npm run testall